<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>LyfStay Hotel Price Tracker</title>
  <style>
    * {
      box-sizing: border-box;
    }
    html, body {
      height: 100%;
      margin: 0;
      padding: 0;
    }
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      width: 100%;
      background: #f8f9fa;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }
    .header {
      background: linear-gradient(135deg, #003580 0%, #0057b8 100%);
      color: white;
      padding: 15px 20px;
      text-align: center;
      box-shadow: 0 2px 10px rgba(0,0,0,0.2);
      flex-shrink: 0;
    }
    .header h2 {
      margin: 0;
      font-size: 18px;
      font-weight: 600;
      letter-spacing: 0.5px;
    }
    .header .subtitle {
      font-size: 11px;
      opacity: 0.85;
      margin-top: 4px;
    }
    .main-content {
      background: #f8f9fa;
      padding: 15px;
      flex: 1;
      overflow-y: auto;
    }
    .card {
      background: white;
      border-radius: 12px;
      padding: 15px;
      margin-bottom: 12px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.08);
    }
    .card-title {
      font-size: 12px;
      font-weight: 600;
      color: #003580;
      margin-bottom: 10px;
      display: flex;
      align-items: center;
      gap: 6px;
    }
    .card-title::before {
      content: '';
      width: 4px;
      height: 14px;
      background: linear-gradient(135deg, #003580 0%, #0057b8 100%);
      border-radius: 2px;
    }
    .input-group {
      display: flex;
      gap: 10px;
      margin-bottom: 10px;
    }
    .input-wrapper {
      flex: 1;
    }
    .input-wrapper label {
      display: block;
      font-size: 10px;
      color: #666;
      margin-bottom: 4px;
      font-weight: 500;
    }
    .input-wrapper input {
      width: 100%;
      padding: 8px 10px;
      border: 1.5px solid #e0e0e0;
      border-radius: 8px;
      font-size: 12px;
      transition: all 0.2s ease;
      background: #fafafa;
    }
    .input-wrapper input:focus {
      outline: none;
      border-color: #003580;
      background: white;
      box-shadow: 0 0 0 3px rgba(0,53,128,0.1);
    }
    .btn {
      padding: 10px 16px;
      border: none;
      border-radius: 8px;
      font-size: 12px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s ease;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 6px;
    }
    .btn-primary {
      background: linear-gradient(135deg, #003580 0%, #0057b8 100%);
      color: white;
    }
    .btn-primary:hover {
      transform: translateY(-1px);
      box-shadow: 0 4px 12px rgba(0,53,128,0.3);
    }
    .btn-secondary {
      background: #f0f0f0;
      color: #333;
    }
    .btn-secondary:hover {
      background: #e0e0e0;
    }
    .btn-success {
      background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
      color: white;
    }
    .btn-success:hover {
      transform: translateY(-1px);
      box-shadow: 0 4px 12px rgba(40,167,69,0.3);
    }
    .btn-group {
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
    }
    .btn-group .btn {
      flex: 1;
      min-width: 100px;
    }
    .btn-full {
      width: 100%;
    }
    #feedback {
      min-height: 20px;
      font-size: 12px;
      font-weight: 500;
      padding: 8px 12px;
      border-radius: 8px;
      margin-bottom: 10px;
      display: none;
    }
    #feedback.show {
      display: block;
    }
    #feedback.success {
      background: #d4edda;
      color: #155724;
      border: 1px solid #c3e6cb;
    }
    #feedback.error {
      background: #f8d7da;
      color: #721c24;
      border: 1px solid #f5c6cb;
    }
    .section-title {
      font-size: 14px;
      font-weight: 600;
      color: #333;
      margin: 15px 0 10px;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    .section-title .count {
      background: #003580;
      color: white;
      font-size: 10px;
      padding: 2px 8px;
      border-radius: 10px;
    }
    .site-tabs {
      display: flex;
      gap: 8px;
      margin: 10px 0 12px;
    }
    .site-tab {
      flex: 1;
      text-align: center;
      padding: 10px 12px;
      border-radius: 10px;
      border: 1.5px solid #e0e0e0;
      background: #fff;
      cursor: pointer;
      font-weight: 600;
      color: #444;
      transition: all 0.2s ease;
    }
    .site-tab.active {
      border-color: #003580;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      color: #003580;
      background: #e8f4ff;
    }
    .hotel {
      background: white;
      border-radius: 12px;
      padding: 12px 15px;
      margin-bottom: 10px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.08);
      border-left: 4px solid #003580;
    }
    .hotel-name {
      font-weight: 600;
      color: #333;
      font-size: 13px;
      margin-bottom: 6px;
    }
    .hotel-meta {
      font-size: 10px;
      color: #666;
      margin-bottom: 8px;
    }
    .hotel-meta a {
      color: #003580;
      text-decoration: none;
    }
    .hotel-meta a:hover {
      text-decoration: underline;
    }
    .room-table {
      width: 100%;
      border-collapse: collapse;
      margin: 10px 0;
      font-size: 11px;
      border-radius: 8px;
      overflow: hidden;
      table-layout: fixed;
    }
    .room-table th, .room-table td {
      padding: 8px 10px;
      text-align: left;
      vertical-align: top;
    }
    .room-table th {
      background: linear-gradient(135deg, #003580 0%, #0057b8 100%);
      color: white;
      font-weight: 600;
      font-size: 10px;
      text-transform: uppercase;
      letter-spacing: 0.3px;
    }
    .room-table tbody tr {
      border-bottom: 1px solid #f0f0f0;
    }
    .room-table tbody tr:last-child {
      border-bottom: none;
    }
    .room-table tbody tr:nth-child(even) {
      background-color: #f8f9fa;
    }
    .room-table tbody tr:hover {
      background-color: #e8f4ff;
    }
    .room-table td.price {
      font-weight: 700;
      color: #28a745;
      white-space: nowrap;
      width: 65px;
    }
    .room-cell, .cond-cell {
      overflow: hidden;
    }
    .cell-text {
      display: block;
      line-height: 1.4;
    }
    .cell-text.collapsed {
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      max-width: 100%;
    }
    .expand-cell {
      width: 35px;
      text-align: center;
      vertical-align: middle;
    }
    .expand-btn {
      color: #003580;
      font-size: 9px;
      cursor: pointer;
      display: inline-block;
      padding: 3px 6px;
      background: #e8f4ff;
      border-radius: 4px;
      font-weight: 600;
      border: none;
      white-space: nowrap;
    }
    .expand-btn:hover {
      background: #d0e8ff;
    }
    .condition-free {
      color: #155724;
      background: #d4edda;
      padding: 3px 8px;
      border-radius: 10px;
      font-size: 9px;
      font-weight: 600;
    }
    .condition-nonrefund {
      color: #721c24;
      background: #f8d7da;
      padding: 3px 8px;
      border-radius: 10px;
      font-size: 9px;
      font-weight: 600;
    }
    .condition-flexible {
      color: #0c5460;
      background: #d1ecf1;
      padding: 3px 8px;
      border-radius: 10px;
      font-size: 9px;
      font-weight: 600;
    }
    .condition-standard {
      color: #666;
      background: #e9ecef;
      padding: 3px 8px;
      border-radius: 10px;
      font-size: 9px;
      font-weight: 600;
    }
    .price-down {
      color: #155724;
      font-weight: 700;
      background: #d4edda;
      padding: 3px 8px;
      border-radius: 10px;
      font-size: 10px;
    }
    .price-up {
      color: #721c24;
      font-weight: 700;
      background: #f8d7da;
      padding: 3px 8px;
      border-radius: 10px;
      font-size: 10px;
    }
    .no-change {
      color: #999;
      font-size: 10px;
    }
    .btn-remove {
      background: #f8f8f8;
      border: 1px solid #ddd;
      color: #666;
      padding: 6px 12px;
      border-radius: 6px;
      font-size: 10px;
      cursor: pointer;
      transition: all 0.2s;
    }
    .btn-remove:hover {
      background: #f8d7da;
      border-color: #f5c6cb;
      color: #721c24;
    }
    #priceChangeNotifications {
      display: none;
      background: linear-gradient(135deg, #fff3cd 0%, #ffe8a1 100%);
      border-radius: 12px;
      padding: 12px;
      margin-bottom: 12px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.08);
    }
    .notif-header {
      font-size: 12px;
      font-weight: 600;
      color: #856404;
      margin-bottom: 10px;
      padding-bottom: 8px;
      border-bottom: 1px solid rgba(133,100,4,0.2);
    }
    .price-change-item {
      background: white;
      border-radius: 8px;
      padding: 8px 10px;
      margin-bottom: 6px;
      border-left: 4px solid #888;
      font-size: 11px;
    }
    .price-change-item.down {
      border-left-color: #28a745;
    }
    .price-change-item.up {
      border-left-color: #dc3545;
    }
    .change-badge {
      display: inline-block;
      padding: 2px 8px;
      border-radius: 10px;
      font-size: 9px;
      font-weight: 700;
    }
    .change-badge.down {
      background: #d4edda;
      color: #155724;
    }
    .change-badge.up {
      background: #f8d7da;
      color: #721c24;
    }
    .old-price {
      text-decoration: line-through;
      color: #888;
    }
    .new-price {
      font-weight: 700;
    }
    .empty-state {
      text-align: center;
      padding: 30px 20px;
      color: #666;
    }
    .empty-state .icon {
      font-size: 40px;
      margin-bottom: 10px;
    }
    .empty-state p {
      font-size: 12px;
      margin: 0;
    }
    .upgrade-banner {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 0;
      text-align: center;
      display: none;
      margin: 10px 15px 0;
      border-radius: 12px;
      box-shadow: 0 4px 12px rgba(102,126,234,0.3);
      overflow: hidden;
      transition: all 0.3s ease;
    }
    .upgrade-banner.show {
      display: block;
    }
    .upgrade-banner.collapsed {
      padding: 12px 15px;
    }
    .upgrade-banner.collapsed .upgrade-content {
      display: none;
    }
    .upgrade-banner.collapsed .upgrade-toggle {
      display: flex;
      align-items: center;
      justify-content: space-between;
      cursor: pointer;
      width: 100%;
    }
    .upgrade-banner.expanded {
      padding: 15px;
    }
    .upgrade-banner.expanded .upgrade-toggle {
      display: none;
    }
    .upgrade-banner.expanded .upgrade-content {
      display: block;
    }
    .upgrade-toggle {
      display: none;
      font-size: 14px;
      font-weight: 600;
      user-select: none;
    }
    .upgrade-toggle .toggle-arrow {
      font-size: 12px;
      transition: transform 0.2s ease;
    }
    .upgrade-banner.collapsed .upgrade-toggle .toggle-arrow {
      transform: rotate(180deg);
    }
    .upgrade-content {
      display: block;
    }
    .upgrade-content h3 {
      margin: 0 0 8px 0;
      font-size: 14px;
      font-weight: 600;
    }
    .upgrade-content p {
      margin: 0 0 12px 0;
      font-size: 12px;
      opacity: 0.95;
    }
    .plan-select {
      width: 100%;
      padding: 8px 10px;
      margin-bottom: 12px;
      border: 1px solid rgba(255,255,255,0.3);
      border-radius: 8px;
      background: rgba(255,255,255,0.95);
      color: #333;
      font-size: 12px;
      cursor: pointer;
    }
    .upgrade-banner .btn-upgrade {
      background: white;
      color: #667eea;
      padding: 10px 20px;
      border: none;
      border-radius: 8px;
      font-weight: 600;
      cursor: pointer;
      font-size: 13px;
      transition: all 0.2s ease;
      width: 100%;
    }
    .upgrade-banner .btn-upgrade:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(0,0,0,0.2);
    }
    .login-banner {
      background: #ffffff;
      color: #333;
      padding: 12px 15px;
      text-align: center;
      display: none;
      margin: 10px 15px 0;
      border-radius: 12px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.08);
      border: 1px solid #e6e6e6;
    }
    .login-banner.show {
      display: block;
    }
    .login-banner p {
      margin: 0 0 10px 0;
      font-size: 12px;
    }
    .login-banner .btn-login {
      background: linear-gradient(135deg, #003580 0%, #0057b8 100%);
      color: white;
      padding: 10px 20px;
      border: none;
      border-radius: 8px;
      font-weight: 600;
      cursor: pointer;
      font-size: 13px;
      transition: all 0.2s ease;
    }
    .login-banner .btn-login:hover {
      transform: translateY(-1px);
      box-shadow: 0 4px 12px rgba(0,53,128,0.3);
    }
    .login-banner .btn-logout {
      background: #f0f0f0;
      color: #333;
      padding: 8px 12px;
      border: none;
      border-radius: 8px;
      font-weight: 600;
      cursor: pointer;
      font-size: 11px;
      margin-left: 6px;
    }
    .locked {
      opacity: 0.55;
      pointer-events: none;
      filter: grayscale(0.15);
    }
    .plan-select {
      width: 100%;
      padding: 8px 10px;
      border: 1px solid #e0e0e0;
      border-radius: 8px;
      font-size: 12px;
      margin-bottom: 10px;
    }
    /* Account Profile */
    .account-card {
      background: #fff;
      border-radius: 12px;
      padding: 14px 16px;
      margin: 10px 15px 0;
      box-shadow: 0 2px 8px rgba(0,0,0,0.08);
      display: none;
    }
    .account-card.show { display: block; }
    .account-header {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 10px;
    }
    .account-avatar {
      width: 36px; height: 36px;
      border-radius: 50%;
      background: linear-gradient(135deg,#003580,#0057b8);
      color:#fff; font-weight:700; font-size:15px;
      display:flex; align-items:center; justify-content:center;
      flex-shrink:0;
    }
    .account-name { font-size:13px; font-weight:600; color:#333; }
    .account-email { font-size:11px; color:#888; }
    .tier-badge {
      display: inline-block;
      padding: 3px 10px;
      border-radius: 20px;
      font-size: 11px;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }
    .tier-badge.free { background:#e9ecef; color:#495057; }
    .tier-badge.starter { background:#dbeafe; color:#1d4ed8; }
    .tier-badge.pro { background:linear-gradient(135deg,#fef3c7,#fde68a); color:#92400e; }
    .account-details {
      background:#f8f9fa;
      border-radius: 8px;
      padding: 10px 12px;
      margin-top: 8px;
      font-size: 12px;
    }
    .account-details .detail-row {
      display: flex;
      justify-content: space-between;
      padding: 4px 0;
      color: #555;
    }
    .account-details .detail-row .label { color:#888; font-size:11px; }
    .account-details .detail-row .value { font-weight:600; color:#333; font-size:11px; }
    .tier-desc {
      font-size: 11px;
      color: #666;
      margin-top: 6px;
      line-height: 1.5;
    }
    .btn-cancel-sub {
      background: none;
      border: 1px solid #dc3545;
      color: #dc3545;
      padding: 6px 14px;
      border-radius: 6px;
      font-size: 11px;
      cursor: pointer;
      margin-top: 10px;
      transition: all 0.2s;
    }
    .btn-cancel-sub:hover {
      background:#dc3545; color:#fff;
    }
    /* Toast Notification */
    #toast {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      z-index: 9999;
      padding: 12px 16px;
      font-size: 13px;
      font-weight: 500;
      text-align: center;
      transform: translateY(-100%);
      transition: transform 0.3s ease;
    }
    #toast.show { transform: translateY(0); }
    #toast.success { background: #22c55e; color: #fff; }
    #toast.error { background: #ef4444; color: #fff; }
    /* Profile Toggle */
    .profile-toggle {
      display: none;
      align-items: center;
      gap: 8px;
      padding: 8px 15px;
      margin: 8px 15px 0;
      background: #fff;
      border-radius: 10px;
      box-shadow: 0 1px 4px rgba(0,0,0,0.06);
      cursor: pointer;
      font-size: 12px;
      color: #333;
      border: 1px solid #e6e6e6;
    }
    .profile-toggle.show { display: flex; }
    .profile-toggle .avatar-sm {
      width: 24px; height: 24px;
      border-radius: 50%;
      background: linear-gradient(135deg,#003580,#0057b8);
      color:#fff; font-weight:700; font-size:11px;
      display:flex; align-items:center; justify-content:center;
    }
    .profile-toggle .tier-sm {
      margin-left: auto;
      font-size: 10px;
      font-weight: 700;
      padding: 2px 8px;
      border-radius: 10px;
      text-transform: uppercase;
    }
    .profile-toggle .tier-sm.free { background:#e9ecef; color:#495057; }
    .profile-toggle .tier-sm.starter { background:#dbeafe; color:#1d4ed8; }
    .profile-toggle .tier-sm.pro { background:#fef3c7; color:#92400e; }
    .profile-toggle .expand-icon { font-size: 10px; color: #888; margin-left: 4px; }
    .account-card.expanded { display: block; }
    /* Help button styling */
    .header-content {
      display: flex;
      align-items: center;
      justify-content: space-between;
      width: 100%;
    }
    .header-title {
      flex: 1;
    }
    .header-title h2 {
      margin: 0;
      font-size: 18px;
      font-weight: 600;
      letter-spacing: 0.5px;
    }
    .header-title .subtitle {
      font-size: 11px;
      opacity: 0.85;
      margin-top: 4px;
    }
    .help-btn {
      background: rgba(255,255,255,0.2);
      color: white;
      border: none;
      border-radius: 6px;
      width: 32px;
      height: 32px;
      font-size: 16px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s ease;
      font-weight: 600;
      flex-shrink: 0;
      margin-left: 8px;
    }
    .help-btn:hover {
      background: rgba(255,255,255,0.3);
      transform: scale(1.05);
    }
    /* Help modal styling */
    .help-modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0,0,0,0.5);
      z-index: 10000;
      overflow-y: auto;
      padding: 20px;
    }
    .help-modal.show {
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .help-modal-content {
      background: white;
      border-radius: 12px;
      max-width: 500px;
      width: 100%;
      max-height: 80vh;
      overflow-y: auto;
      box-shadow: 0 10px 40px rgba(0,0,0,0.3);
    }
    .help-modal-header {
      background: linear-gradient(135deg, #003580 0%, #0057b8 100%);
      color: white;
      padding: 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      border-radius: 12px 12px 0 0;
    }
    .help-modal-header h2 {
      margin: 0;
      font-size: 18px;
    }
    .help-modal-close {
      background: rgba(255,255,255,0.2);
      color: white;
      border: none;
      border-radius: 50%;
      width: 32px;
      height: 32px;
      font-size: 20px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .help-modal-close:hover {
      background: rgba(255,255,255,0.3);
    }
    .help-modal-body {
      padding: 20px;
    }
    .help-section {
      margin-bottom: 20px;
      border-bottom: 1px solid #e0e0e0;
      padding-bottom: 15px;
    }
    .help-section:last-child {
      border-bottom: none;
    }
    .help-section h3 {
      margin: 0 0 8px 0;
      font-size: 14px;
      font-weight: 600;
      color: #003580;
      display: flex;
      align-items: center;
      gap: 6px;
    }
    .help-section .paid-badge {
      background: #667eea;
      color: white;
      font-size: 10px;
      font-weight: 600;
      padding: 2px 6px;
      border-radius: 6px;
      margin-left: auto;
    }
    .help-section p {
      margin: 0;
      font-size: 12px;
      color: #666;
      line-height: 1.5;
    }
    /* Price table expansion */
    .expand-all-rooms {
      display: block;
      font-size: 11px;
      color: #667eea;
      cursor: pointer;
      text-decoration: underline;
      margin-top: 8px;
      margin-left: 0;
      font-weight: 600;
      padding: 0;
      border: none;
      background: none;
    }
    .expand-all-rooms:hover {
      color: #003580;
    }
    /* Hide extra room rows by default */
    .room-table.collapsed tbody tr.extra-room {
      display: none;
    }
    .room-table:not(.collapsed) ~ .expand-all-rooms {
      display: none;
    }
  </style>
</head>
<body>

  <!-- Toast Notification -->
  <div id="toast"></div>

  <div class="header">
    <div class="header-content">
      <div class="header-title">
        <h2>üè® LyfStay Hotel Price Tracker</h2>
        <div class="subtitle">Track & compare hotel prices</div>
      </div>
      <button class="help-btn" id="helpBtn" title="Help & Guide">?</button>
    </div>
  </div>

  <div id="loginBanner" class="login-banner">
    <p id="loginStatus">Sign in with Google to use the tracker.</p>
    <button class="btn-login" id="loginBtn">Sign in with Google</button>
  </div>

  <!-- Profile Toggle (collapsed) -->
  <div id="profileToggle" class="profile-toggle">
    <div class="avatar-sm" id="toggleAvatar">?</div>
    <span id="toggleEmail">Account</span>
    <span class="tier-sm free" id="toggleTier">FREE</span>
    <span class="expand-icon">‚ñº</span>
  </div>

  <!-- Account Profile (expanded) -->
  <div id="accountCard" class="account-card">
    <div class="account-header">
      <div class="account-avatar" id="accountAvatar">?</div>
      <div>
        <div class="account-name" id="accountName">‚Äî</div>
        <div class="account-email" id="accountEmail">‚Äî</div>
      </div>
      <span class="tier-badge free" id="accountTierBadge" style="margin-left:auto;">FREE</span>
    </div>
    <div class="tier-desc" id="accountTierDesc"></div>
    <div class="account-details" id="accountDetails" style="display:none;">
      <div class="detail-row"><span class="label">Monthly cost</span><span class="value" id="accountCost">‚Äî</span></div>
      <div class="detail-row"><span class="label">Started</span><span class="value" id="accountStartDate">‚Äî</span></div>
      <div class="detail-row"><span class="label">Next charge</span><span class="value" id="accountNextCharge">‚Äî</span></div>
    </div>
    <button class="btn-cancel-sub" id="cancelSubBtn" style="display:none;">Cancel Subscription</button>
    <button class="btn-logout" id="logoutBtn" style="margin-top:10px;width:100%;">Sign out</button>
  </div>

  <div id="upgradeBanner" class="upgrade-banner collapsed">
    <div class="upgrade-toggle">
      <span>üöÄ Upgrade to Premium</span>
      <span class="toggle-arrow">‚ñ≤</span>
    </div>
    <div class="upgrade-content">
      <h3>üöÄ Unlock Premium Features</h3>
      <p id="tierStatus">Choose your plan to unlock more OTAs and hotel slots.</p>
      <select class="plan-select" id="planSelect">
        <option value="starter">Starter: Booking + Agoda (10 hotels) - $4.99/mo</option>
        <option value="pro">Pro: All OTAs (Unlimited) - $9.99/mo</option>
      </select>
      <button class="btn-upgrade" id="upgradeBtn">Upgrade Now</button>
    </div>
  </div>

  <div class="main-content" id="mainContent">
    <div class="site-tabs">
      <div class="site-tab active" data-site="booking">Booking</div>
      <div class="site-tab" data-site="airbnb">Airbnb</div>
      <div class="site-tab" data-site="agoda">Agoda</div>
    </div>

    <!-- Dates Card -->
    <div class="card">
      <div class="card-title">üìÖ Travel Dates</div>
      <div class="input-group">
        <div class="input-wrapper">
          <label>Check-in</label>
          <input type="date" id="checkinInput">
        </div>
        <div class="input-wrapper">
          <label>Check-out</label>
          <input type="date" id="checkoutInput">
        </div>
      </div>
      <button class="btn btn-primary btn-full" id="setDateBtn">Set Dates</button>
    </div>

    <!-- Auto Refresh Card -->
    <div class="card" id="autoRefreshCard">
      <div class="card-title">‚è∞ Auto Refresh <span id="autoRefreshPaidBadge" style="font-size:9px;background:#667eea;color:#fff;padding:2px 6px;border-radius:8px;margin-left:6px;">Paid</span></div>
      <div id="autoRefreshLocked" style="font-size:11px;color:#888;margin-bottom:8px;">Auto refresh is available for Starter and Pro plans.</div>
      <div id="autoRefreshControls" style="display:none;">
        <label style="display:flex;align-items:center;gap:8px;font-size:12px;margin-bottom:10px;cursor:pointer;">
          <input type="checkbox" id="autoRefreshEnabled" style="width:16px;height:16px;cursor:pointer;">
          <span>Enable auto refresh</span>
        </label>
        <div class="input-group" id="autoRefreshInputs" style="display:none;">
          <div class="input-wrapper" style="flex: 2;">
            <label>Interval (minutes)</label>
            <input type="number" id="intervalInput" min="1" placeholder="e.g. 30">
          </div>
          <div style="flex: 1; display: flex; align-items: flex-end;">
            <button class="btn btn-secondary btn-full" id="setIntervalBtn">Set</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Actions Card -->
    <div class="card">
      <div class="card-title">‚ö° Quick Actions</div>
      <div class="btn-group" style="margin-bottom: 8px;">
        <button class="btn btn-success" id="trackBtn">‚ûï Track Hotel</button>
        <button class="btn btn-primary" id="refreshBtn">üîÑ Refresh</button>
      </div>
      <!-- Track Options (expandable) -->
      <div id="trackOptions" style="display:none;margin-top:10px;">
        <button class="btn btn-success btn-full" id="trackCurrentBtn" style="margin-bottom:8px;">üìç Track This Page</button>
        <button class="btn btn-secondary btn-full" id="trackUrlToggleBtn">üîó Track by URL</button>
        <div id="trackUrlSection" style="display:none;margin-top:10px;">
          <div class="input-wrapper" style="margin-bottom: 8px;">
            <label>Paste hotel URL (Booking.com, Airbnb, or Agoda)</label>
            <input type="url" id="hotelUrlInput" placeholder="https://www.booking.com/hotel/...">
          </div>
          <button class="btn btn-success btn-full" id="trackUrlBtn">üì• Track from URL</button>
        </div>
      </div>
      <button class="btn btn-secondary btn-full" id="openAllBtn" style="margin-top:8px;">üîó Open All Hotels</button>
    </div>

    <div id="feedback" style="display:none;"></div>

    <div id="priceChangeNotifications"></div>

    <div class="section-title">
      üìã Tracked Hotels <span class="count" id="hotelCount">0</span>
    </div>
    <div id="list"></div>
  </div>

  <!-- Help Modal -->
  <div id="helpModal" class="help-modal">
    <div class="help-modal-content">
      <div class="help-modal-header">
        <h2>Help & Feature Guide</h2>
        <button class="help-modal-close" id="helpModalClose">&times;</button>
      </div>
      <div class="help-modal-body">
        <div class="help-section">
          <h3>üóìÔ∏è Travel Dates</h3>
          <p>Set your check-in and check-out dates. These dates will be used when opening hotel pages to show prices for your specific travel dates.</p>
        </div>
        
        <div class="help-section">
          <h3>‚è∞ Auto Refresh <span class="paid-badge">Paid Feature</span></h3>
          <p>Automatically refresh hotel prices at your set interval (in minutes). Available on Starter ($4.99/mo) and Pro ($9.99/mo) plans. Free tier only supports manual refresh.</p>
        </div>
        
        <div class="help-section">
          <h3>‚ö° Quick Actions</h3>
          <p><strong>Refresh:</strong> Manually update all tracked hotels now.</p>
          <p style="margin-top: 8px;"><strong>Track Hotel:</strong> Track the current hotel page you're viewing.</p>
          <p style="margin-top: 8px;"><strong>Track by URL:</strong> Paste a hotel URL to track prices without visiting the page.</p>
        </div>
        
        <div class="help-section">
          <h3>üìç Tracking Limits</h3>
          <p><strong>Free:</strong> Booking.com only, max 3 hotels</p>
          <p style="margin-top: 6px;"><strong>Starter ($4.99/mo):</strong> Booking.com + Agoda, max 10 hotels</p>
          <p style="margin-top: 6px;"><strong>Pro ($9.99/mo):</strong> All OTAs (Booking, Agoda, Airbnb), unlimited hotels</p>
        </div>
        
        <div class="help-section">
          <h3>üí≥ Subscription Management</h3>
          <p>View your current plan, billing details, and next charge date in your account profile. Click the profile toggle at the top to expand your account details. You can cancel anytime.</p>
        </div>
        
        <div class="help-section">
          <h3>üìä Price Tracking</h3>
          <p>For each hotel, we show the room types and their prices. Price changes are highlighted with ‚Üë (increase) or ‚Üì (decrease) indicators. Click the expand button to see all room types for a hotel.</p>
        </div>
      </div>
    </div>
  </div>

  <script src="popup.js"></script>
</body>
</html>
